<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>๋ก๊ทธ์ธ ํ์คํธ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5">
<h2>๐ ๋ก๊ทธ์ธ ํ์คํธ</h2>
<div class="mb-3">
    <label>์ด๋ฉ์ผ</label>
    <input type="email" id="email" class="form-control" placeholder="user@example.com">
</div>
<div class="mb-3">
    <label>๋น๋ฐ๋ฒํธ</label>
    <input type="password" id="password" class="form-control" placeholder="****">
</div>
<button onclick="login()" class="btn btn-primary">๋ก๊ทธ์ธ</button>
<a href="/view/signup" class="btn btn-secondary">ํ์๊ฐ์ํ๋ฌ ๊ฐ๊ธฐ</a>

<script>
    function login() {
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;

        fetch('/auth/login', { // ์ค์ API ์ฃผ์
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email: email, password: password })
        })
        .then(response => {
            if (response.ok) return response.json(); // ์ฑ๊ณตํ๋ฉด JSON ๋ฐ๊ธฐ
            throw new Error('๋ก๊ทธ์ธ ์คํจ!');
        })
        .then(data => {
            alert("๋ก๊ทธ์ธ ์ฑ๊ณต! ๋ฐ๊ธ๋ ํํฐ:\n" + data.accessToken);
            console.log("Access Token:", data.accessToken);
            // ํํฐ์ ๋ก์ปฌ์คํ๋ฆฌ์ง์ ์์ฅ (๋์ค์ React Native๋ ์ด๋๊ฒ ํจ)
            localStorage.setItem('accessToken', data.accessToken);
        })
        .catch(error => alert(error));
    }
</script>
</body>
</html>